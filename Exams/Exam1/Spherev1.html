<html>
<!-- TODO remove unnecessary things -->
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<div style="margin: 2%;">
    <h1>Input radius value and get the volume of the sphere. </h1>
    <label for="textRadius"><b>Radius:</b></label><br>
    <input class="form-control w-25" id="textRadius" value=50>
    <br><br>
    <label for="textVolume"><b>Volume:</b></label><br>
    <input class="form-control w-25" id="textVolume" disabled>
    <br><br>
    <button class="btn btn-primary btn-lg btn-block w-25"
        onclick="clearInterval(intervalID);ClearCanvas();CalcVolume(+textRadius.value);
        DrawCircle(myCanvas.width/2, myCanvas.height/2, +textRadius.value)">Confirm</button>
    <br><br>
</div>

<div style="margin: 2%;">
    <canvas id="myCanvas" style="border:1px solid #d3d3d3;" width="1000" height="600">
        Your browser does not support the HTML5 canvas tag.</canvas>
    <br><br>
    <button class="btn btn-primary btn-lg w-75" onclick="ClearCanvas();clearInterval(intervalID)">Clear</button>
    <br><br>
</div>


<body>

    <script>
        var c = document.getElementById("myCanvas");
        var ctx = c.getContext("2d");
        var test = myCanvas.width
        var intervalID = setInterval(ExpandingCircle, 100)

        function DrawCircle(startX, startY, radius) {
            if (startX + radius > myCanvas.width ||
                startY + radius > myCanvas.height) {
                alert('Your sphere is too big!')

                return
            }

            ctx.beginPath();
            // x, y, radius, start angle, end angle
            ctx.arc(startX, startY, radius, 0, 2 * Math.PI);

            ctx.stroke();
            ctx.closePath();
        }

        function ClearCanvas() {
            const context = myCanvas.getContext('2d');
            context.clearRect(0, 0, myCanvas.width, myCanvas.height);
        }

        function ExpandingCircle() {
            let smallerSide = Math.min(myCanvas.width, myCanvas.height)
            let nextRad = randNum(smallerSide/2)

            DrawCircle(myCanvas.width/2, myCanvas.height/2, nextRad)
        }

        function CalcVolume(rad) {
            if (!IsNumeric(rad)) {
                alert('Please enter a valid number!')

                return
            }

            textVolume.value = VolumeSphere(rad)
        }

        // utils

        function VolumeSphere(rad) {
            return 4 * Math.PI * Math.pow(rad, 3) / 3
        }

        function randNum(max = 10) {
            return Math.floor(Math.random() * max)
        }

        function IsNumeric(num) {
            return !isNaN(parseFloat(num)) && isFinite(num)
        }

    </script>

</body>
</html>